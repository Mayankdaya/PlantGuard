<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PlantGuard • AI Engine</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <meta name="theme-color" content="#0c0f10">
  <style>
    :root{ --primary:#9ca3af; --primary-600:#6b7280; --primary-700:#4b5563; --accent-2:#e5e7eb; --bg-900:#0a0a0a; --bg-800:#0c0f10; --bg-700:#111316; --text:#f3f4f6; --muted: rgba(255,255,255,.72); --glass: rgba(255,255,255,.08); --glass-border: rgba(255,255,255,.14); --radius-lg:16px; --radius-md:12px; --radius-sm:8px; --shadow-lg:0 20px 60px rgba(0,0,0,.35) }
    *{box-sizing:border-box}
    html{scroll-behavior:smooth}
    body{
      margin:0; color:var(--text);
      font-family:'Poppins', system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      background-image:
        radial-gradient(80% 60% at 15% -10%, rgba(156,163,175,0.12) 0%, rgba(156,163,175,0) 60%),
        radial-gradient(70% 60% at 85% 110%, rgba(229,231,235,0.10) 0%, rgba(229,231,235,0) 60%),
        linear-gradient(135deg, var(--bg-900), var(--bg-800), var(--bg-700));
      background-size: 100% 100%, 100% 100%, 500% 500%;
      background-position: top left, bottom right, center;
      animation: backgroundShift 32s ease infinite;
      min-height:100vh; overflow-x:hidden;
    }
    @keyframes backgroundShift { 0%{background-position:0% 50%} 50%{background-position:100% 50%} 100%{background-position:0% 50%} }
    .bg-grid{position:fixed; inset:0; pointer-events:none; z-index:0; opacity:.18; background-image:repeating-linear-gradient(0deg,rgba(255,255,255,0.12) 0,rgba(255,255,255,0.12) 1px,transparent 1px,transparent 30px),repeating-linear-gradient(90deg,rgba(255,255,255,0.12) 0,rgba(255,255,255,0.12) 1px,transparent 1px,transparent 30px); mix-blend-mode:overlay}
    .bg-grid-diag{position:fixed; inset:0; pointer-events:none; z-index:0; opacity:.14; background-image:repeating-linear-gradient(45deg,rgba(255,255,255,0.08) 0,rgba(255,255,255,0.08) 1px,transparent 1px,transparent 60px),repeating-linear-gradient(-45deg,rgba(255,255,255,0.08) 0,rgba(255,255,255,0.08) 1px,transparent 1px,transparent 60px); mix-blend-mode:overlay}
    .global-spotlight{position:fixed; inset:-20%; pointer-events:none; z-index:-1; background:radial-gradient(600px 600px at var(--sx,50%) var(--sy,30%), rgba(229,231,235,0.10) 0%, rgba(156,163,175,0.07) 35%, transparent 70%); filter:blur(48px); opacity:.45; transition:opacity .25s ease; mix-blend-mode:screen}
    .global-spotlight.fade{opacity:.4}

    .pg-navbar{position:sticky; top:0; z-index:10; background:rgba(12,15,16,.6); backdrop-filter:blur(10px); -webkit-backdrop-filter:blur(10px); border-bottom:1px solid rgba(255,255,255,.08)}
    .pg-navbar .nav-link{color:var(--muted)}
    .pg-navbar .nav-link:hover,.pg-navbar .nav-link:focus{color:#fff}
    .brand{display:inline-flex; align-items:center; gap:10px}
    .brand svg{width:22px; height:22px}
    .brand-name{font-weight:700; background:linear-gradient(to right,#ffffff,#9ca3af); -webkit-background-clip:text; background-clip:text; -webkit-text-fill-color:transparent}

    .content-wrap{max-width:1140px; margin:0 auto; padding:0 10px}
    .glass-card{background:var(--glass); backdrop-filter:blur(14px); -webkit-backdrop-filter:blur(14px); border:1px solid var(--glass-border); border-radius:var(--radius-lg); padding:1.25rem; box-shadow:0 10px 28px rgba(0,0,0,.26); position:relative; overflow:hidden; transition:transform .25s ease, box-shadow .25s ease}
    .glass-card:hover{ transform: translateY(-3px); box-shadow:0 18px 48px rgba(0,0,0,.34) }
    .glass-card::before{ content:""; position:absolute; inset:0; border-radius:inherit; padding:1px; background:linear-gradient(135deg, rgba(229,231,235,.28), rgba(156,163,175,.14)); -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0); mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0); -webkit-mask-composite: xor; mask-composite: exclude; opacity:.6; pointer-events:none }
    .btn-primary-pg{background:linear-gradient(135deg,var(--primary),var(--primary-600)); border:0; color:#fff; border-radius:44px; padding:12px 22px; position:relative; overflow:hidden}
    .btn-primary-pg::after{content:""; position:absolute; top:-20%; left:-50%; width:40%; height:140%; background:linear-gradient(120deg,rgba(255,255,255,0),rgba(255,255,255,.35),rgba(255,255,255,0)); transform:translateX(-120%) skewX(-20deg); transition:transform .6s ease; pointer-events:none}
    .btn-primary-pg:hover::after{transform:translateX(250%) skewX(-20deg)}
    .btn-secondary-pg{background:rgba(255,255,255,.10); border:1px solid rgba(255,255,255,.22); color:#fff; border-radius:44px; padding:12px 22px; position:relative; overflow:hidden}
    .btn-secondary-pg::after{content:""; position:absolute; top:-20%; left:-50%; width:40%; height:140%; background:linear-gradient(120deg,rgba(255,255,255,0),rgba(255,255,255,.25),rgba(255,255,255,0)); transform:translateX(-120%) skewX(-20deg); transition:transform .6s ease; pointer-events:none}
    .btn-secondary-pg:hover::after{transform:translateX(250%) skewX(-20deg)}

    .hero{max-width:1140px; margin:0 auto; padding:4rem 0 2.25rem}
    .gradient-text{background:linear-gradient(90deg,#ffffff,#9ca3af); -webkit-background-clip:text; background-clip:text; -webkit-text-fill-color:transparent}
    .hero-title{font-weight:800; line-height:1.02; letter-spacing:-.025em; position:relative; display:block}
    .hero-title::after{content:""; position:absolute; left:50%; transform:translateX(-50%); bottom:-10px; width:120px; height:2px; background:linear-gradient(90deg, rgba(229,231,235,.0), rgba(229,231,235,.6), rgba(229,231,235,.0)); border-radius:2px; opacity:.9}

    .upload-drop{ border:1px dashed rgba(255,255,255,.28); border-radius:16px; padding:28px; text-align:center; color:var(--muted); position:relative; overflow:hidden; cursor:pointer }
    .upload-drop.drag{ background:rgba(255,255,255,.06); box-shadow:0 0 0 3px rgba(229,231,235,.18) inset }
    .help{ color:var(--muted); font-size:.95rem }
    .hero-sub-chip{ display:block; width:max-content; margin:0.5rem auto 0; padding:10px 18px; border-radius:9999px; background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.18); box-shadow:0 10px 30px rgba(0,0,0,.28) }
    .ring{ position:absolute; inset:-1px; border-radius:inherit; pointer-events:none; padding:1px; }
    .ring::before{ content:""; position:absolute; inset:0; border-radius:inherit; background:linear-gradient(135deg, rgba(229,231,235,.35), rgba(156,163,175,.18)); -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0); mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0); -webkit-mask-composite: xor; mask-composite: exclude; opacity:.7 }

    /* Section spacing */
    .section-pad{ padding: 22px 0; }
    @media (min-width: 992px){ .section-pad{ padding: 34px 0; } }
  </style>
</head>
<body>
  <a href="#main" class="visually-hidden-focusable">Skip to main content</a>
  <div class="bg-grid" aria-hidden="true"></div>
  <div class="bg-grid-diag" aria-hidden="true"></div>
  <div class="global-spotlight" aria-hidden="true"></div>

  <nav class="navbar navbar-expand-lg pg-navbar" role="navigation" aria-label="Primary">
    <div class="container">
      <a class="navbar-brand brand" href="/" aria-label="PlantGuard Home">
        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <path d="M4 13c6.5-.5 9-3.5 10.5-9.5 3.5 3.5 5.2 6.2 5 10.5-.2 4.3-3.4 7.5-7.5 7.5S4.2 18 4 13Z" stroke="#e5e7eb" stroke-width="1.6" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M6.5 14.5c2-.2 5.5-1.2 7.5-3.5" stroke="#9ca3af" stroke-width="1.4" stroke-linecap="round"/>
        </svg>
        <span class="brand-name">PlantGuard</span>
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#pgNav" aria-controls="pgNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon" style="filter: invert(1);"></span>
      </button>
      <div class="collapse navbar-collapse" id="pgNav">
        <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
          <li class="nav-item"><a class="nav-link" href="/">Home</a></li>
          <li class="nav-item"><a class="nav-link" href="#how">How it works</a></li>
          <li class="nav-item"><a class="nav-link" href="#tips">Tips</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <main id="main">
    <header class="hero text-center">
      <h1 class="display-5 hero-title gradient-text">AI Engine</h1>
      <p class="lead hero-sub-chip mt-2"><span class="gradient-text">Upload a leaf image or capture from camera to detect disease instantly.</span></p>
      <div class="mt-2 small" style="color:var(--muted)">Trusted by agronomists and growers • Private by design</div>
    </header>

    <!-- Breadcrumbs -->
    <div class="content-wrap" aria-label="Breadcrumb" style="margin-bottom:14px">
      <nav class="small" style="color:var(--muted)">
        <span><a href="/" class="text-decoration-none" style="color:var(--accent-2)">Home</a></span>
        <span class="mx-1">/</span>
        <span>AI Engine</span>
      </nav>
    </div>

    <!-- ARIA live region for announcements -->
    <div class="visually-hidden" id="srIndex" aria-live="polite"></div>

    <!-- How it works -->
    <section id="how" class="content-wrap section-pad">
      <h5 class="gradient-text mb-3 text-center">How it works</h5>
      <div class="row g-3">
        <div class="col-12 col-md-4">
          <div class="glass-card h-100 step-card">
            <h6 class="gradient-text mb-2"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" style="margin-right:6px"><path d="M4 7h16M4 12h16M4 17h10" stroke="#e5e7eb" stroke-width="1.5" stroke-linecap="round"/></svg>1. Upload or Capture</h6>
            <p style="color:var(--muted)">Choose a clear, well‑lit image or use your camera to capture a leaf photo.</p>
          </div>
        </div>
        <div class="col-12 col-md-4">
          <div class="glass-card h-100 step-card">
            <h6 class="gradient-text mb-2"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" style="margin-right:6px"><path d="M12 5v14m-7-7h14" stroke="#e5e7eb" stroke-width="1.5" stroke-linecap="round"/></svg>2. Submit</h6>
            <p style="color:var(--muted)">Our model processes the image and returns an instant prediction.</p>
          </div>
        </div>
        <div class="col-12 col-md-4">
          <div class="glass-card h-100 step-card">
            <h6 class="gradient-text mb-2"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" style="margin-right:6px"><path d="M5 12l4 4L19 6" stroke="#e5e7eb" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>3. Review & Act</h6>
            <p style="color:var(--muted)">See description and prevention steps to take immediate action.</p>
          </div>
        </div>
      </div>
    </section>

    <section class="content-wrap section-pad">
      <h5 class="gradient-text mb-3 text-center">Scan your leaf</h5>
      <div class="row g-4 align-items-stretch">
        <!-- Left: Upload / Camera -->
        <div class="col-12 col-lg-7">
          <div class="glass-card h-100">
            <form action="/submit" method="POST" enctype="multipart/form-data" id="upload-form" novalidate>
              <div class="mb-3 position-relative">
                <div id="drop" class="upload-drop">
                  <div class="ring" aria-hidden="true"></div>
                  <svg width="40" height="40" viewBox="0 0 24 24" fill="none" class="mb-2" aria-hidden="true"><path d="M12 16V4m0 12l-3-3m3 3l3-3" stroke="#e5e7eb" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/><rect x="3" y="14" width="18" height="6" rx="2" stroke="#9ca3af" stroke-width="1.2"/></svg>
                  <div class="mb-1">Drag & drop a JPG/PNG image here</div>
                  <div class="mb-2">or</div>
                  <label for="file-input" class="btn btn-secondary-pg" title="Choose image from your device">Choose File</label>
                  <input id="file-input" type="file" name="image" accept="image/jpeg,image/png" hidden aria-label="Select leaf image" />
                  <div id="file-name" class="mt-2 small"></div>
                  <div class="small" style="color:var(--muted)">Max size 10 MB</div>
                  <div class="d-flex justify-content-center gap-2 mt-2">
                    <span class="badge-chip" style="background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.18); border-radius:9999px; padding:6px 10px">JPG</span>
                    <span class="badge-chip" style="background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.18); border-radius:9999px; padding:6px 10px">PNG</span>
                    <span class="badge-chip" style="background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.18); border-radius:9999px; padding:6px 10px">10 MB</span>
                    <span class="badge-chip" style="background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.18); border-radius:9999px; padding:6px 10px">Private</span>
                  </div>
                </div>
              </div>

              <div class="mb-3">
                <div id="camera-container" class="text-center">
                  <video id="camera-feed" width="420" height="300" autoplay playsinline style="border-radius:12px; display:none"></video>
                  <canvas id="camera-canvas" width="420" height="300" style="display:none"></canvas>
                  <div class="mt-2 d-flex flex-wrap gap-2 justify-content-center">
                    <button type="button" id="open-camera" class="btn btn-secondary-pg" title="Use your webcam to capture">Open Camera</button>
                    <button type="button" id="capture" class="btn btn-secondary-pg" disabled title="Capture current frame">Capture</button>
                    <button type="button" id="close-camera" class="btn btn-secondary-pg" style="display:none" title="Stop camera">Close</button>
                  </div>
                  <img id="preview" alt="Preview" class="mt-3 img-fluid" style="display:none; border-radius:12px; max-height:320px" />
                </div>
              </div>

              <div id="alert" class="alert alert-warning py-2 px-3" role="alert" style="display:none; background:rgba(255,193,7,.15); border:1px solid rgba(255,193,7,.4); color:#ffe08a">
                <span id="alert-text">Please choose an image or capture one before submitting.</span>
              </div>
              <div class="text-center">
                <button id="submit-btn" type="submit" class="btn btn-primary-pg" disabled title="Submit selected image for analysis">
                  <span class="spinner-border spinner-border-sm me-2" id="spinner" role="status" aria-hidden="true" style="display:none"></span>
                  Submit
                </button>
              </div>
              <div class="help text-center mt-2">Supported: JPG, PNG. Keep the leaf centered, well‑lit, and in focus.</div>
            </form>
          </div>
        </div>

        <!-- Right: Tips / Info -->
        <div class="col-12 col-lg-5">
          <div class="glass-card h-100">
            <h5 class="gradient-text mb-2">Best Practices</h5>
            <ul class="mb-3" style="color:var(--muted)">
              <li>Use a clear, well-lit photo against a plain background.</li>
              <li>Ensure the leaf fills most of the frame and is in focus.</li>
              <li>Avoid shadows and glare for best results.</li>
            </ul>
            <h6 class="gradient-text mb-2" id="tips">Prevention Tips</h6>
            <ol style="color:var(--muted)">
              <li>Good sanitation practices.</li>
              <li>Fertilize to keep plants healthy.</li>
              <li>Inspect plants before bringing them home.</li>
              <li>Warm soil before planting and rotate crops.</li>
              <li>Provide air circulation and remove diseased foliage.</li>
            </ol>
          </div>
        </div>
        <div class="col-12 col-lg-5">
          <div class="glass-card h-100">
            <h6 class="gradient-text mb-2">Upload Guidelines</h6>
            <ul class="mb-2" style="color:var(--muted)">
              <li>Formats: JPG or PNG</li>
              <li>Max size: 10 MB</li>
              <li>Recommended: 1024×1024 or higher</li>
            </ul>
            <h6 class="gradient-text mb-2">Privacy</h6>
            <p class="mb-0" style="color:var(--muted)">Images are processed locally by your browser and server. No third‑party upload.</p>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer class="text-center py-3 small" style="color:var(--muted)">© <script>document.write(new Date().getFullYear())</script> PlantGuard • AI Engine</footer>

  <script>
    // Drag & drop upload
    const drop = document.getElementById('drop');
    const fileInput = document.getElementById('file-input');
    const fileName = document.getElementById('file-name');
    drop.addEventListener('dragover', e=>{ e.preventDefault(); drop.classList.add('drag'); });
    drop.addEventListener('dragleave', ()=> drop.classList.remove('drag'));
    function validateFile(file){
      const alertBox = document.getElementById('alert');
      const alertText = document.getElementById('alert-text');
      if(!file){ return false; }
      const validTypes = ['image/jpeg','image/png'];
      if(!validTypes.includes(file.type)){
        alertText.textContent = 'Unsupported file type. Please use JPG or PNG.';
        alertBox.style.display = 'block';
        return false;
      }
      const maxSize = 10 * 1024 * 1024; // 10MB
      if(file.size > maxSize){
        alertText.textContent = 'File is too large. Maximum allowed size is 10 MB.';
        alertBox.style.display = 'block';
        return false;
      }
      alertBox.style.display = 'none';
      return true;
    }
    drop.addEventListener('drop', e=>{ 
      e.preventDefault(); drop.classList.remove('drag'); 
      if(e.dataTransfer.files.length){ 
        const f = e.dataTransfer.files[0];
        if(validateFile(f)){
          fileInput.files = e.dataTransfer.files; 
          fileName.textContent = f.name; 
          document.getElementById('preview').style.display='none'; 
          document.getElementById('submit-btn').disabled = false;
          document.getElementById('srIndex').textContent = 'File selected: ' + f.name;
        } else {
          document.getElementById('submit-btn').disabled = true;
        }
      }
    });
    fileInput.addEventListener('change', ()=>{ 
      if(fileInput.files.length){ 
        const f = fileInput.files[0];
        if(validateFile(f)){
          fileName.textContent=f.name; 
          document.getElementById('preview').style.display='none'; 
          document.getElementById('submit-btn').disabled = false;
          document.getElementById('srIndex').textContent = 'File selected: ' + f.name;
        } else {
          document.getElementById('submit-btn').disabled = true;
        }
      } else {
        document.getElementById('submit-btn').disabled = true;
      }
    });

    // Camera controls
    const openBtn = document.getElementById('open-camera');
    const captureBtn = document.getElementById('capture');
    const closeBtn = document.getElementById('close-camera');
    const video = document.getElementById('camera-feed');
    const canvas = document.getElementById('camera-canvas');
    const preview = document.getElementById('preview');
    let stream;

    async function openCamera(){
      try{
        stream = await navigator.mediaDevices.getUserMedia({ video: true });
        video.srcObject = stream;
        video.style.display = 'block';
        captureBtn.disabled = false;
        closeBtn.style.display = 'inline-block';
      }catch(err){ console.error('Camera error', err); }
    }
    function closeCamera(){
      if(stream){ stream.getTracks().forEach(t=>t.stop()); }
      video.style.display='none';
      closeBtn.style.display='none';
      captureBtn.disabled = true;
    }
    function capture(){
      const w = video.videoWidth || 420; const h = video.videoHeight || 300;
      canvas.width = w; canvas.height = h;
      const ctx = canvas.getContext('2d');
      ctx.drawImage(video, 0, 0, w, h);
      canvas.toBlob(blob=>{
        const file = new File([blob], 'camera_image.jpg', { type: 'image/jpeg' });
        const dt = new DataTransfer();
        dt.items.add(file);
        fileInput.files = dt.files;
        fileName.textContent = file.name;
        preview.src = URL.createObjectURL(blob);
        preview.style.display = 'block';
        document.getElementById('submit-btn').disabled = false;
        document.getElementById('alert').style.display = 'none';
      }, 'image/jpeg', 0.95);
    }

    openBtn.addEventListener('click', openCamera);
    closeBtn.addEventListener('click', closeCamera);
    captureBtn.addEventListener('click', capture);

    // Form validation and submit UX
    const form = document.getElementById('upload-form');
    const submitBtn = document.getElementById('submit-btn');
    const spinner = document.getElementById('spinner');
    form.addEventListener('submit', function(e){
      if(!fileInput.files || !fileInput.files.length){
        e.preventDefault();
        document.getElementById('alert').style.display = 'block';
        return false;
      }
      submitBtn.disabled = true;
      spinner.style.display = 'inline-block';
    });

    // Navbar shadow microinteraction on scroll
    (function(){
      const nav = document.querySelector('.pg-navbar');
      const onScroll = ()=>{ if(window.scrollY > 6) nav.classList.add('scrolled'); else nav.classList.remove('scrolled'); };
      onScroll();
      window.addEventListener('scroll', onScroll, { passive:true });
    })();
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
